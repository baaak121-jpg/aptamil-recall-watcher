# 날짜 입력 가이드

## ✅ 지원하는 날짜 형식

봇이 인식하는 모든 날짜 형식:

### 1. DD-MM-YYYY (기본) ⭐
```
15-06-2026
01-12-2025
31-03-2027
```

### 2. DD.MM.YYYY (점 구분)
```
15.06.2026
01.12.2025
31.03.2027
```

### 3. DD/MM/YYYY (슬래시 구분)
```
15/06/2026
01/12/2025
31/03/2027
```

### 4. YYYY-MM-DD (ISO 형식)
```
2026-06-15
2025-12-01
2027-03-31
```

### 5. 공백 구분
```
15 06 2026
01 12 2025
```

## ❌ 잘못된 형식

### 한 자리 숫자 (불가)
```
❌ 15-6-2026   (월이 한 자리)
❌ 5-06-2026   (일이 한 자리)
✅ 15-06-2026  (올바름)
✅ 05-06-2026  (올바름)
```

### 잘못된 구분자
```
❌ 15_06_2026
❌ 15,06,2026
✅ 15-06-2026
```

### 순서 오류
```
❌ 06-15-2026  (MM-DD-YYYY, 미국 형식)
❌ 2026-15-06  (YYYY-DD-MM)
✅ 15-06-2026  (DD-MM-YYYY)
✅ 2026-06-15  (YYYY-MM-DD)
```

## 🧪 테스트 예시

### Telegram 대화 예시

```
Bot: MHD(유통기한)를 입력하세요.
     형식: DD-MM-YYYY (예: 15-06-2026)

You: 15-06-2026
Bot: ✅ 등록 완료!
     모델: Aptamil Pronutra PRE
     MHD: 15-06-2026

───────────────────────────

You: 15.06.2026
Bot: ✅ 등록 완료!  (자동으로 15-06-2026으로 변환)

───────────────────────────

You: 2026-06-15
Bot: ✅ 등록 완료!  (자동으로 15-06-2026으로 변환)

───────────────────────────

You: 15/06/2026
Bot: ✅ 등록 완료!  (자동으로 15-06-2026으로 변환)

───────────────────────────

You: 15 06 2026
Bot: ✅ 등록 완료!  (자동으로 15-06-2026으로 변환)
```

## ❌ 오류 메시지 예시

### 잘못된 형식
```
You: 15-6-2026

Bot: ❌ 잘못된 날짜 형식입니다.

     입력하신 값: "15-6-2026"
     
     지원하는 형식:
     • DD-MM-YYYY (예: 15-06-2026)
     • DD.MM.YYYY (예: 15.06.2026)
     • DD/MM/YYYY (예: 15/06/2026)
     • YYYY-MM-DD (예: 2026-06-15)
     
     다시 입력해주세요:
```

### 유효하지 않은 날짜
```
You: 32-01-2026

Bot: ❌ 잘못된 날짜 형식입니다.
     (유효하지 않은 날짜)
```

```
You: 15-13-2026

Bot: ❌ 잘못된 날짜 형식입니다.
     (13월은 존재하지 않음)
```

## 🔍 디버깅 팁

### 1. 입력값 확인

봇 터미널에서 로그 확인:
```
[Bot] User input: "15-6-2026"
[Parser] Invalid format: missing leading zero
```

### 2. 형식 테스트

```powershell
# Node.js REPL에서 테스트
node
> const { parseUserDate } = require('./dist/parser.js');
> parseUserDate('15-06-2026')
'15-06-2026'
> parseUserDate('15.06.2026')
'15-06-2026'
```

## 💡 사용 팁

### 제품 캔에서 날짜 확인

**Aptamil 제품 캔 하단:**
```
MHD: 15.06.2026
또는
Best before: 15/06/2026
```

**입력 시:**
- 점(.) → 그대로 입력: `15.06.2026` ✅
- 슬래시(/) → 그대로 입력: `15/06/2026` ✅
- 하이픈(-) → 그대로 입력: `15-06-2026` ✅

### 여러 제품 등록

```
/add
→ Pronutra PRE 선택
→ 15-06-2026 입력
→ ✅ 등록 완료

/add
→ Pronutra 1 선택
→ 20.07.2026 입력
→ ✅ 등록 완료

/add
→ HA PRE 선택
→ 2026-08-15 입력
→ ✅ 등록 완료
```

## 🆘 문제 해결

### "잘못된 날짜 형식" 오류가 계속 나요

**체크리스트:**

1. **두 자리 숫자 확인**
   ```
   ❌ 5-6-2026
   ✅ 05-06-2026
   ```

2. **구분자 확인**
   ```
   ✅ 15-06-2026 (하이픈)
   ✅ 15.06.2026 (점)
   ✅ 15/06/2026 (슬래시)
   ❌ 15_06_2026 (언더스코어)
   ```

3. **순서 확인**
   ```
   ✅ 15-06-2026 (일-월-년)
   ✅ 2026-06-15 (년-월-일)
   ❌ 06-15-2026 (월-일-년, 미국식)
   ```

4. **유효한 날짜 확인**
   ```
   ❌ 32-01-2026 (32일 없음)
   ❌ 15-13-2026 (13월 없음)
   ❌ 29-02-2025 (윤년 아님)
   ✅ 29-02-2024 (윤년)
   ```

### 봇이 응답 안 해요

**원인:**
- Conversation state가 초기화됨
- 다른 명령어 실행 중

**해결:**
```
/add
→ 모델 선택
→ 날짜 입력 (이 단계에서만 날짜 인식)
```

## 📝 입력 예시 (모두 가능)

### 같은 날짜, 다른 형식
```
15-06-2026  ✅
15.06.2026  ✅
15/06/2026  ✅
2026-06-15  ✅
15 06 2026  ✅

→ 모두 "15-06-2026"으로 저장됨
```

### 실제 사용 예시
```
제품 캔 표기: MHD 15.06.2026
입력: 15.06.2026
저장: 15-06-2026
매칭: ✅ 정확히 일치
```

## 🎯 권장 형식

**가장 명확한 형식:**
```
DD-MM-YYYY

예시:
15-06-2026
01-12-2025
31-03-2027
```

**이유:**
- 국제적으로 널리 사용
- 혼동 가능성 낮음
- 봇의 기본 형식

## 🔄 봇 재시작 후 테스트

```powershell
# 1. 봇 종료
Ctrl+C

# 2. 봇 재시작
npm run dev

# 3. 다시 테스트
/add
→ 모델 선택
→ 날짜 입력 (다양한 형식 시도)
```

---

**이제 다양한 형식으로 날짜를 입력할 수 있습니다!** 🎉

봇을 재시작하고 다시 시도해보세요:

```powershell
cd C:\Cursor\aptamil-recall-watcher
npm run dev
```

그리고 Telegram에서:
```
/add
→ 모델 선택
→ 15-06-2026 또는 15.06.2026 또는 15/06/2026
```

어떤 형식으로 입력하셨는지 알려주시면 더 도움드릴 수 있습니다!